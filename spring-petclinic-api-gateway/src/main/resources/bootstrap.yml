spring:
  application:
    name: api-gateway
  profiles:
    active: default
---
spring:
  profiles: kubernetes
  zipkin:
    base-url: http://zipkin.istio-system:9411
    service:
      name: api-gateway.spring-petclinic
  cloud:
    config:
      enabled: false
    kubernetes:
      reload:
        strategy: restart-context
        enabled: true
      config:
        enabled: true
        name: petclinic-config
  sleuth:
    baggage:
      remote-fields:
        - x-request-id
        - x-b3-traceid
        - x-b3-spanid
        - x-b3-parentspanid
        - x-b3-sampled
        - x-b3-flags
        - x-ot-span-context
      remote-keys:
        - principal
    scheduled:
      skip-pattern: '.*KubernetesCatalogWatch'
    log:
      slf4j:
        correlation-fields: principal
logging.pattern.level: '%d{yyyy-MM-dd HH:mm:ss.SSS} %5p [%X{principal}] [%X{X-B3-TraceId:-}] %m%n'
management:
  endpoint:
    restart:
      enabled: true
